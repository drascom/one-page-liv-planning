<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Record</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body class="patient-page">
    <header class="patient-header">
      <a href="/" class="back-link">← Back to schedule</a>
      <button type="button" class="logout-link" data-logout-btn>Logout</button>
      <div class="patient-heading">
        <p class="patient-week" id="patient-week"></p>
        <h1 id="patient-name">Patient Record</h1>
        <p class="patient-city" id="patient-city"></p>
      </div>
    </header>

    <main class="patient-content">
      <section class="patient-card">
        <form id="patient-form" class="patient-form">
          <div class="form-grid">
            <label class="form-field">
              <span>First Name</span>
              <input id="first-name" name="firstName" type="text" required placeholder="Enter first name" />
            </label>
            <label class="form-field">
              <span>Last Name</span>
              <input id="last-name" name="lastName" type="text" required placeholder="Enter last name" />
            </label>
            <label class="form-field">
              <span>Procedure Date</span>
              <input
                id="procedure-date"
                name="procedureDate"
                type="date"
                placeholder="YYYY-MM-DD"
              />
            </label>
            <label class="form-field">
              <span>Email</span>
              <input id="email" name="email" type="email" required placeholder="name@example.com" />
            </label>
            <label class="form-field">
              <span>Phone</span>
              <input id="phone" name="phone" type="tel" required placeholder="+1 555 000 0000" />
            </label>
            <label class="form-field">
              <span>City</span>
              <input id="city" name="city" type="text" required placeholder="City" />
            </label>
          </div>

          <div class="form-grid">
            <label class="form-field">
              <span>Status</span>
              <select id="status" name="status"></select>
            </label>
            <label class="form-field">
              <span>Procedure Type</span>
              <select id="procedure-type" name="procedureType"></select>
            </label>
            <label class="form-field">
              <span>Grafts</span>
              <input id="grafts" name="grafts" type="text" inputmode="numeric" placeholder="e.g. 2500" />
            </label>
            <label class="form-field">
              <span>Payment</span>
              <select id="payment" name="payment"></select>
            </label>
            <label class="form-field">
              <span>Consultations</span>
              <select id="consultation" name="consultation" multiple size="2">
              </select>
            </label>
            <label class="form-field">
              <span>Photos</span>
              <input id="photos" name="photos" type="text" placeholder="None" />
            </label>
          </div>

          <div class="form-grid form-grid--stacked">
            <label class="form-field">
              <span>Forms</span>
              <div id="forms-checklist" class="form-checklist" role="group" aria-label="Forms checklist"></div>
              <select id="forms" name="forms" multiple size="5" hidden></select>
            </label>
            <label class="form-field">
              <span>Consents</span>
              <div id="consents-checklist" class="form-checklist" role="group" aria-label="Consents checklist"></div>
              <select id="consents" name="consents" multiple size="3" hidden></select>
            </label>
          </div>

          <div class="form-actions">
            <button type="submit" class="primary-btn">Save Patient</button>
            <button type="button" class="danger-btn" id="delete-patient-btn" hidden>Delete Patient</button>
            <span id="form-status" class="form-status" role="status"></span>
          </div>
        </form>
      </section>

      <section class="patient-card">
        <h2>Upload Photos</h2>
        <p class="upload-hint">Drag & drop or browse to upload multiple photos.</p>
        <div class="drop-zone" id="drop-zone">
          <input id="photo-input" type="file" multiple accept="image/*" hidden />
          <button type="button" class="secondary-btn" id="browse-button">Browse files</button>
          <p class="drop-zone__text">Drop up to 10 images. Files will be saved under uploads/&lt;last-name&gt;</p>
        </div>
        <ul class="upload-list" id="upload-list"></ul>
        <p class="upload-status" id="upload-status"></p>
      </section>

      <section class="patient-card photo-section">
        <div class="photo-section__header">
          <h2>Patient Photos</h2>
          <p class="photo-empty" id="photo-empty">No photos uploaded yet.</p>
        </div>
        <div class="photo-gallery" id="photo-gallery"></div>
      </section>
    </main>

    <div class="photo-viewer" id="photo-viewer" hidden>
      <button type="button" class="photo-viewer__close" id="photo-viewer-close" aria-label="Close viewer">
        ×
      </button>
      <button
        type="button"
        class="photo-viewer__nav photo-viewer__nav--prev"
        id="photo-viewer-prev"
        aria-label="Previous photo"
      >
        ←
      </button>
      <img id="photo-viewer-image" alt="Patient photo" />
      <p id="photo-viewer-caption"></p>
      <button
        type="button"
        class="photo-viewer__nav photo-viewer__nav--next"
        id="photo-viewer-next"
        aria-label="Next photo"
      >
        →
      </button>
      <button type="button" class="photo-viewer__delete" id="photo-viewer-delete">Delete photo</button>
    </div>

    <script src="/app-config.js"></script>
    <script src="/static/patient.js" type="module"></script>
  </body>
</html>
